<!--- Chat display maybe -->
<!---Behind login logic-->
<!--Show all users that are online in the chat-->
<!--Nofity users when somemone join with a message-->
<!--Message need timestamp and user name-->
<!--Need to double check wen socket connections-->
<%- include('partials/header') %>

<div class="container">
  <!-- Sidebar for logged-in users -->
  <aside class="sidebar">
    <h3>Currently Logged-in Users</h3>
    <ul id="user-list">
      <% loggedUsers.forEach(user => { %>
        <li><%= user %></li>
      <% }) %>
    </ul>
  </aside>

  <!-- Main content for chat -->
  <main class="main-content">
    <section class="user-info">
      <p>You are logged in as: <strong><%= loggedUser.username %></strong></p>
    </section>

    <!-- Chat display area -->
    <section class="chat-display">
      <div id="messages" class="messages">
        <!-- Display messages from the server -->
        <% messages.forEach(message => { %>
          <div class="message">
            <p class="username"><%= message.username %> <span class="timestamp"><%= message.timestamp %></span></p>
            <p><%= message.message %></p>
          </div>
        <% }) %>
      </div>
    </section>

    <!-- Chat input at the bottom -->
    <footer class="chat-footer">
      <form id="chat-form">
        <input 
          type="text" 
          id="chat-message" 
          name="message" 
          placeholder="Type your message..." 
          required
        />
        <button type="submit">Send</button>
      </form>
    </footer>
  </main>
</div>

<!-- Inject the loggedUser object into a client-side script -->
<script>
  const loggedUser = <%- JSON.stringify(loggedUser) %>;
</script>

<!-- Include the external frontend.js -->
<script src="/frontend.js" type="application/javascript"></script>
